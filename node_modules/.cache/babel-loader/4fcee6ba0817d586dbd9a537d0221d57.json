{"ast":null,"code":"import _extends from '@babel/runtime/helpers/esm/extends';\nimport React, { forwardRef, useRef, useEffect, useLayoutEffect, useState, useMemo, Children, createElement } from 'react';\nimport { extend, useThree, useFrame, useUpdate, useLoader, addEffect, addAfterEffect, applyProps } from 'react-three-fiber';\nimport { OrbitControls as OrbitControls$1, MapControls as MapControls$1 } from 'three/examples/jsm/controls/OrbitControls';\nimport mergeRefs from 'react-merge-refs';\nimport { TrackballControls as TrackballControls$1 } from 'three/examples/jsm/controls/TrackballControls';\nimport { DeviceOrientationControls as DeviceOrientationControls$1 } from 'three/examples/jsm/controls/DeviceOrientationControls';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { TransformControls as TransformControls$1 } from 'three/examples/jsm/controls/TransformControls';\nimport pick from 'lodash.pick';\nimport omit from 'lodash.omit';\nimport { FlyControls as FlyControls$1 } from 'three/examples/jsm/controls/FlyControls';\nimport { AudioListener, AudioLoader, Vector2, Vector3, PerspectiveCamera as PerspectiveCamera$1, OrthographicCamera as OrthographicCamera$1, Color, MeshStandardMaterial, MeshPhysicalMaterial, ShaderChunk, ShaderMaterial, Spherical, AdditiveBlending, Matrix4, Ray, Sphere as Sphere$1, Raycaster, Camera, Shape, TextureLoader, CubeTextureLoader, DefaultLoadingManager } from 'three';\nimport { LineGeometry } from 'three/examples/jsm/lines/LineGeometry';\nimport { LineMaterial } from 'three/examples/jsm/lines/LineMaterial';\nimport { Line2 } from 'three/examples/jsm/lines/Line2';\nimport { Text as Text$1 } from 'troika-three-text';\nimport ReactDOM from 'react-dom';\nimport * as StatsImpl from 'three/examples/js/libs/stats.min';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Sky as Sky$1 } from 'three/examples/jsm/objects/Sky';\nimport { Reflector as Reflector$1 } from 'three/examples/jsm/objects/Reflector';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader';\nimport create$1 from 'zustand';\nextend({\n  OrbitControlsImpl: OrbitControls$1\n});\nconst OrbitControls = /*#__PURE__*/forwardRef((props = {\n  enableDamping: true\n}, ref) => {\n  const controls = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useFrame(() => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(() => {\n    const _controls = controls.current;\n    _controls == null ? void 0 : _controls.addEventListener('change', invalidate);\n    return () => _controls == null ? void 0 : _controls.removeEventListener('change', invalidate);\n  }, [invalidate]);\n  return /*#__PURE__*/React.createElement(\"orbitControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\nextend({\n  MapControlsImpl: MapControls$1\n});\nconst MapControls = /*#__PURE__*/forwardRef((props = {\n  enableDamping: true\n}, ref) => {\n  const controls = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useFrame(() => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(() => {\n    const _controls = controls.current;\n    _controls == null ? void 0 : _controls.addEventListener('change', invalidate);\n    return () => _controls == null ? void 0 : _controls.removeEventListener('change', invalidate);\n  }, [invalidate]);\n  return /*#__PURE__*/React.createElement(\"mapControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\nextend({\n  TrackballControlsImpl: TrackballControls$1\n});\nconst TrackballControls = /*#__PURE__*/forwardRef((props, ref) => {\n  const controls = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useFrame(() => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(() => {\n    const _controls = controls.current;\n    _controls == null ? void 0 : _controls.addEventListener('change', invalidate);\n    return () => _controls == null ? void 0 : _controls.removeEventListener('change', invalidate);\n  }, [invalidate]);\n  return /*#__PURE__*/React.createElement(\"trackballControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, props));\n});\nextend({\n  DeviceOrientationControlsImp: DeviceOrientationControls$1\n});\nconst DeviceOrientationControls = /*#__PURE__*/forwardRef((props, ref) => {\n  const controls = useRef();\n  const {\n    camera\n  } = useThree();\n  useFrame(() => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(() => {\n    const currentControl = controls.current;\n    currentControl == null ? void 0 : currentControl.connect();\n    return () => currentControl == null ? void 0 : currentControl.dispose();\n  });\n  return /*#__PURE__*/React.createElement(\"deviceOrientationControlsImp\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera]\n  }, props));\n});\nextend({\n  TransformControlsImpl: TransformControls$1\n});\nconst TransformControls = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n\n  const transformOnlyPropNames = ['enabled', 'axis', 'mode', 'translationSnap', 'rotationSnap', 'scaleSnap', 'space', 'size', 'dragging', 'showX', 'showY', 'showZ'];\n  const transformProps = pick(props, transformOnlyPropNames);\n  const objectProps = omit(props, transformOnlyPropNames);\n  const controls = useRef();\n  const group = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useLayoutEffect(() => {\n    var _controls$current;\n\n    return void ((_controls$current = controls.current) == null ? void 0 : _controls$current.attach(group.current));\n  }, [children]);\n  useEffect(() => {\n    const _controls = controls.current;\n    _controls == null ? void 0 : _controls.addEventListener('change', invalidate);\n    return () => _controls == null ? void 0 : _controls.removeEventListener('change', invalidate);\n  }, [invalidate]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"transformControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, transformProps)), /*#__PURE__*/React.createElement(\"group\", _extends({\n    ref: group\n  }, objectProps), children));\n});\nextend({\n  FlyControlsImpl: FlyControls$1\n});\nconst FlyControls = /*#__PURE__*/forwardRef((props, ref) => {\n  const controls = useRef();\n  const {\n    camera,\n    gl\n  } = useThree();\n  useFrame((state, delta) => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update(delta);\n  });\n  return /*#__PURE__*/React.createElement(\"flyControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, props));\n});\nconst Detailed = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    children,\n    distances\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"distances\"]);\n\n  const lod = useUpdate(lod => {\n    lod.levels.length = 0;\n    lod.children.forEach((object, index) => lod.levels.push({\n      object,\n      distance: distances[index]\n    }));\n  }, []);\n  useFrame(state => {\n    var _lod$current;\n\n    return (_lod$current = lod.current) == null ? void 0 : _lod$current.update(state.camera);\n  });\n  return /*#__PURE__*/React.createElement(\"lOD\", _extends({\n    ref: mergeRefs([lod, ref])\n  }, props), children);\n});\nconst PositionalAudio = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    url,\n    distance = 1,\n    loop = true\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"url\", \"distance\", \"loop\"]);\n\n  const sound = useRef();\n  const {\n    camera\n  } = useThree();\n  const [listener] = useState(() => new AudioListener());\n  const buffer = useLoader(AudioLoader, url);\n  useEffect(() => {\n    const _sound = sound.current;\n\n    if (_sound) {\n      _sound.setBuffer(buffer);\n\n      _sound.setRefDistance(distance);\n\n      _sound.setLoop(loop);\n\n      _sound.play();\n    }\n\n    camera.add(listener);\n    return () => {\n      camera.remove(listener);\n\n      if (_sound) {\n        _sound.stop();\n\n        _sound.disconnect();\n      }\n    };\n  }, [buffer, camera, distance, listener, loop]);\n  return /*#__PURE__*/React.createElement(\"positionalAudio\", _extends({\n    ref: mergeRefs([sound, ref]),\n    args: [listener]\n  }, props));\n});\n\nfunction create(type) {\n  const El = type + 'BufferGeometry';\n  return /*#__PURE__*/forwardRef((_ref, ref) => {\n    let {\n      args,\n      children\n    } = _ref,\n        props = _objectWithoutPropertiesLoose(_ref, [\"args\", \"children\"]);\n\n    return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n      ref: ref\n    }, props), /*#__PURE__*/React.createElement(El, {\n      attach: \"geometry\",\n      args: args\n    }), children);\n  });\n}\n\nconst Box = create('box');\nconst Circle = create('circle');\nconst Cone = create('cone');\nconst Cylinder = create('cylinder');\nconst Sphere = create('sphere');\nconst Plane = create('plane');\nconst Tube = create('tube');\nconst Torus = create('torus');\nconst TorusKnot = create('torusKnot');\nconst Tetrahedron = create('tetrahedron');\nconst Ring = create('ring');\nconst Polyhedron = create('polyhedron');\nconst Icosahedron = create('icosahedron');\nconst Octahedron = create('octahedron');\nconst Dodecahedron = create('dodecahedron');\nconst Extrude = create('extrude');\nconst Lathe = create('lathe');\nconst Parametric = create('parametric');\nconst Billboard = /*#__PURE__*/forwardRef(function Billboard(_ref, ref) {\n  let {\n    follow = true,\n    lockX = false,\n    lockY = false,\n    lockZ = false\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"follow\", \"lockX\", \"lockY\", \"lockZ\"]);\n\n  const localRef = useRef();\n  useFrame(({\n    camera\n  }) => {\n    if (!follow) return;\n\n    if (localRef.current) {\n      const prev = {\n        x: localRef.current.rotation.x,\n        y: localRef.current.rotation.y,\n        z: localRef.current.rotation.z\n      };\n      localRef.current.lookAt(camera.position); // readjust any axis that is locked\n\n      if (lockX) localRef.current.rotation.x = prev.x;\n      if (lockY) localRef.current.rotation.y = prev.y;\n      if (lockZ) localRef.current.rotation.z = prev.z;\n    }\n  });\n  return /*#__PURE__*/React.createElement(Plane, _extends({\n    ref: mergeRefs([localRef, ref])\n  }, props));\n});\nextend({\n  Line2,\n  LineGeometry,\n  LineMaterial\n});\nconst Line = /*#__PURE__*/React.forwardRef(function Line(_ref, ref) {\n  let {\n    points,\n    color = 'black',\n    vertexColors,\n    lineWidth\n  } = _ref,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"points\", \"color\", \"vertexColors\", \"lineWidth\"]);\n\n  const lineRef = useRef();\n  const geomRef = useRef();\n  const resolution = useMemo(() => new Vector2(512, 512), []);\n  useEffect(() => {\n    if (!geomRef.current || !lineRef.current) return;\n    geomRef.current.setPositions(points.flat());\n    if (vertexColors) geomRef.current.setColors(vertexColors.flat());\n    lineRef.current.computeLineDistances();\n  }, [points, vertexColors]);\n  return /*#__PURE__*/React.createElement(\"line2\", _extends({\n    ref: mergeRefs([lineRef, ref])\n  }, rest), /*#__PURE__*/React.createElement(\"lineGeometry\", {\n    attach: \"geometry\",\n    ref: geomRef\n  }), /*#__PURE__*/React.createElement(\"lineMaterial\", _extends({\n    attach: \"material\",\n    color: color,\n    vertexColors: Boolean(vertexColors),\n    resolution: resolution,\n    linewidth: lineWidth\n  }, rest)));\n});\nextend({\n  TextMeshImpl: Text$1\n});\nconst Text = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    anchorX = 'center',\n    anchorY = 'middle',\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"anchorX\", \"anchorY\", \"children\"]);\n\n  const {\n    invalidate\n  } = useThree();\n  const textRef = useRef();\n  const [baseMtl, setBaseMtl] = useState();\n  const [nodes, text] = useMemo(() => {\n    let n = [];\n    let t = '';\n    Children.forEach(children, child => {\n      if (typeof child === 'string') {\n        t += child;\n      } else if (child && typeof child === 'object' && child.props.attach === 'material') {\n        // Instantiate the base material and grab a reference to it, but don't assign any\n        // props, and assign it as the `material`, which Troika will replace behind the scenes.\n        n.push( /*#__PURE__*/createElement(child.type, {\n          ref: setBaseMtl,\n          attach: 'material'\n        })); // Once the base material has been assigned, grab the resulting upgraded material,\n        // and apply the original material props to that.\n\n        if (baseMtl) {\n          n.push( /*#__PURE__*/React.createElement(\"primitive\", _extends({\n            object: textRef.current.material\n          }, child.props, {\n            attach: null\n          })));\n        }\n      } else {\n        n.push(child);\n      }\n    });\n    return [n, t];\n  }, [children, baseMtl]);\n  useLayoutEffect(() => void textRef.current.sync(invalidate));\n  return /*#__PURE__*/React.createElement(\"textMeshImpl\", _extends({\n    ref: mergeRefs([textRef, ref]),\n    text: text,\n    anchorX: anchorX,\n    anchorY: anchorY\n  }, props), nodes);\n});\nconst PerspectiveCamera = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    makeDefault = false\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"makeDefault\"]);\n\n  const {\n    setDefaultCamera,\n    camera,\n    size\n  } = useThree();\n  const cameraRef = useUpdate(cam => {\n    cam.aspect = size.width / size.height;\n    cam.updateProjectionMatrix();\n  }, [size, props]);\n  useLayoutEffect(() => {\n    if (makeDefault && cameraRef.current) {\n      const oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return () => setDefaultCamera(oldCam);\n    }\n  }, [camera, cameraRef, makeDefault, setDefaultCamera]);\n  return /*#__PURE__*/React.createElement(\"perspectiveCamera\", _extends({\n    ref: mergeRefs([cameraRef, ref])\n  }, props));\n});\nconst OrthographicCamera = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    children,\n    makeDefault = false\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"makeDefault\"]);\n\n  const {\n    setDefaultCamera,\n    camera,\n    size\n  } = useThree();\n  const cameraRef = useUpdate(cam => cam.updateProjectionMatrix(), [size, props]);\n  useLayoutEffect(() => {\n    if (makeDefault && cameraRef.current) {\n      const oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return () => setDefaultCamera(oldCam);\n    }\n  }, [camera, cameraRef, makeDefault, setDefaultCamera]);\n  return /*#__PURE__*/React.createElement(\"orthographicCamera\", _extends({\n    left: size.width / -2,\n    right: size.width / 2,\n    top: size.height / 2,\n    bottom: size.height / -2,\n    ref: mergeRefs([cameraRef, ref])\n  }, props), children);\n});\nconst v1 = new Vector3();\nconst v2 = new Vector3();\nconst v3 = new Vector3();\n\nfunction calculatePosition(el, camera, size) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  const widthHalf = size.width / 2;\n  const heightHalf = size.height / 2;\n  return [objectPos.x * widthHalf + widthHalf, -(objectPos.y * heightHalf) + heightHalf];\n}\n\nfunction isObjectBehindCamera(el, camera) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n  const deltaCamObj = objectPos.sub(cameraPos);\n  const camDir = camera.getWorldDirection(v3);\n  return deltaCamObj.angleTo(camDir) > Math.PI / 2;\n}\n\nfunction objectScale(el, camera) {\n  if (camera instanceof PerspectiveCamera$1) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const vFOV = camera.fov * Math.PI / 180;\n    const dist = objectPos.distanceTo(cameraPos);\n    return 1 / (2 * Math.tan(vFOV / 2) * dist);\n  }\n\n  if (camera instanceof OrthographicCamera$1) return camera.zoom;\n  return 1;\n}\n\nfunction objectZIndex(el, camera, zIndexRange) {\n  if (camera instanceof PerspectiveCamera$1 || camera instanceof OrthographicCamera$1) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const dist = objectPos.distanceTo(cameraPos);\n    const A = (zIndexRange[1] - zIndexRange[0]) / (camera.far - camera.near);\n    const B = zIndexRange[1] - A * camera.far;\n    return Math.round(A * dist + B);\n  }\n\n  return undefined;\n}\n\nconst Html = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  var _portal$current;\n\n  let {\n    children,\n    eps = 0.001,\n    style,\n    className,\n    prepend,\n    center,\n    fullscreen,\n    portal,\n    scaleFactor,\n    zIndexRange = [16777271, 0]\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"eps\", \"style\", \"className\", \"prepend\", \"center\", \"fullscreen\", \"portal\", \"scaleFactor\", \"zIndexRange\"]);\n\n  const {\n    gl,\n    scene,\n    camera,\n    size\n  } = useThree();\n  const [el] = useState(() => document.createElement('div'));\n  const group = useRef(null);\n  const old = useRef([0, 0]);\n  const target = (_portal$current = portal == null ? void 0 : portal.current) != null ? _portal$current : gl.domElement.parentNode;\n  useEffect(() => {\n    if (group.current) {\n      scene.updateMatrixWorld();\n      const vec = calculatePosition(group.current, camera, size);\n      el.style.cssText = \"position:absolute;top:0;left:0;transform:translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0);transform-origin:0 0;\";\n\n      if (target) {\n        if (prepend) target.prepend(el);else target.appendChild(el);\n      }\n\n      return () => {\n        if (target) target.removeChild(el);\n        ReactDOM.unmountComponentAtNode(el);\n      };\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [target]);\n  const styles = useMemo(() => _extends({\n    position: 'absolute',\n    transform: center ? 'translate3d(-50%,-50%,0)' : 'none'\n  }, fullscreen && {\n    top: -size.height / 2,\n    left: -size.width / 2,\n    width: size.width,\n    height: size.height\n  }, style), [style, center, fullscreen, size]);\n  useEffect(() => void ReactDOM.render( /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    style: styles,\n    className: className,\n    children: children\n  }), el));\n  useFrame(() => {\n    if (group.current) {\n      const vec = calculatePosition(group.current, camera, size);\n\n      if (Math.abs(old.current[0] - vec[0]) > eps || Math.abs(old.current[1] - vec[1]) > eps) {\n        el.style.display = !isObjectBehindCamera(group.current, camera) ? 'block' : 'none';\n        const scale = scaleFactor === undefined ? 1 : objectScale(group.current, camera) * scaleFactor;\n        el.style.transform = \"translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0) scale(\" + scale + \")\";\n        el.style.zIndex = \"\" + objectZIndex(group.current, camera, zIndexRange);\n      }\n\n      old.current = vec;\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", _extends({}, props, {\n    ref: group\n  }));\n});\nconst HTML = /*#__PURE__*/React.forwardRef((props, ref) => {\n  useEffect(() => void console.warn('The <HTML> component was renamed to <Html>'), []);\n  return /*#__PURE__*/React.createElement(Html, _extends({}, props, {\n    ref: ref\n  }));\n});\nconst Shadow = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    fog = false,\n    colorStop = 0.0,\n    color = 'black',\n    opacity = 0.5\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"fog\", \"colorStop\", \"color\", \"opacity\"]);\n\n  const canvas = useMemo(() => {\n    let canvas = document.createElement('canvas');\n    canvas.width = 128;\n    canvas.height = 128;\n    let context = canvas.getContext('2d');\n    let gradient = context.createRadialGradient(canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2);\n    gradient.addColorStop(colorStop, new Color(color).getStyle());\n    gradient.addColorStop(1, 'rgba(0,0,0,0)');\n    context.fillStyle = gradient;\n    context.fillRect(0, 0, canvas.width, canvas.height);\n    return canvas;\n  }, [color, colorStop]);\n  return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n    ref: ref\n  }, props), /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [1, 1]\n  }), /*#__PURE__*/React.createElement(\"meshBasicMaterial\", {\n    attach: \"material\",\n    transparent: true,\n    opacity: opacity,\n    fog: fog\n  }, /*#__PURE__*/React.createElement(\"canvasTexture\", {\n    attach: \"map\",\n    args: [canvas]\n  })));\n});\n\nfunction Stats({\n  showPanel = 0,\n  className,\n  parent\n}) {\n  const [stats] = useState(() => new StatsImpl());\n  useEffect(() => {\n    const node = parent && parent.current || document.body;\n    stats.showPanel(showPanel);\n    node == null ? void 0 : node.appendChild(stats.dom);\n    if (className) stats.dom.classList.add(className);\n    const begin = addEffect(() => stats.begin());\n    const end = addAfterEffect(() => stats.end());\n    return () => {\n      node == null ? void 0 : node.removeChild(stats.dom);\n      begin();\n      end();\n    };\n  }, [parent]);\n  return null;\n}\n\nclass WobbleMaterialImpl extends MeshStandardMaterial {\n  constructor(parameters) {\n    super(parameters);\n\n    _defineProperty(this, \"_time\", void 0);\n\n    _defineProperty(this, \"_factor\", void 0);\n\n    this.setValues(parameters);\n    this._time = {\n      value: 0\n    };\n    this._factor = {\n      value: 1\n    };\n  }\n\n  onBeforeCompile(shader) {\n    shader.uniforms.time = this._time;\n    shader.uniforms.factor = this._factor;\n    shader.vertexShader = \"\\n      uniform float time;\\n      uniform float factor;\\n      \" + shader.vertexShader + \"\\n    \";\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"float theta = sin( time + position.y ) / 2.0 * factor;\\n        float c = cos( theta );\\n        float s = sin( theta );\\n        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );\\n        vec3 transformed = vec3( position ) * m;\\n        vNormal = vNormal * m;\");\n  }\n\n  get time() {\n    return this._time.value;\n  }\n\n  set time(v) {\n    this._time.value = v;\n  }\n\n  get factor() {\n    return this._factor.value;\n  }\n\n  set factor(v) {\n    this._factor.value = v;\n  }\n\n}\n\nextend({\n  WobbleMaterialImpl\n});\nconst MeshWobbleMaterial = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  let {\n    speed = 1\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"speed\"]);\n\n  const material = useRef();\n  useFrame(state => material.current && (material.current.time = state.clock.getElapsedTime() * speed));\n  return /*#__PURE__*/React.createElement(\"wobbleMaterialImpl\", _extends({\n    ref: mergeRefs([ref, material]),\n    attach: \"material\"\n  }, props));\n});\nvar distort = \"#define GLSLIFY 1\\nvec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}\"; // eslint-disable-line\n\nclass DistortMaterialImpl extends MeshPhysicalMaterial {\n  constructor(parameters) {\n    super(parameters);\n\n    _defineProperty(this, \"_time\", void 0);\n\n    _defineProperty(this, \"_distort\", void 0);\n\n    _defineProperty(this, \"_radius\", void 0);\n\n    this.setValues(parameters);\n    this._time = {\n      value: 0\n    };\n    this._distort = {\n      value: 0.4\n    };\n    this._radius = {\n      value: 1\n    };\n  }\n\n  onBeforeCompile(shader) {\n    shader.uniforms.time = this._time;\n    shader.uniforms.radius = this._radius;\n    shader.uniforms.distort = this._distort;\n    shader.vertexShader = \"\\n      uniform float time;\\n      uniform float radius;\\n      uniform float distort;\\n      \" + distort + \"\\n      \" + shader.vertexShader + \"\\n    \";\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n        float updateTime = time / 50.0;\\n        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));\\n        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));\\n        \");\n  }\n\n  get time() {\n    return this._time.value;\n  }\n\n  set time(v) {\n    this._time.value = v;\n  }\n\n  get distort() {\n    return this._distort.value;\n  }\n\n  set distort(v) {\n    this._distort.value = v;\n  }\n\n  get radius() {\n    return this._radius.value;\n  }\n\n  set radius(v) {\n    this._radius.value = v;\n  }\n\n}\n\nextend({\n  DistortMaterialImpl\n});\nconst MeshDistortMaterial = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  let {\n    speed = 1\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"speed\"]);\n\n  const material = useRef();\n  useFrame(state => material.current && (material.current.time = state.clock.getElapsedTime() * speed));\n  return /*#__PURE__*/React.createElement(\"distortMaterialImpl\", _extends({\n    ref: mergeRefs([ref, material]),\n    attach: \"material\"\n  }, props));\n});\n\nconst pcss = ({\n  frustrum = 3.75,\n  size = 0.005,\n  near = 9.5,\n  samples = 17,\n  rings = 11\n} = {}) => \"#define LIGHT_WORLD_SIZE \" + size + \"\\n#define LIGHT_FRUSTUM_WIDTH \" + frustrum + \"\\n#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)\\n#define NEAR_PLANE \" + near + \"\\n\\n#define NUM_SAMPLES \" + samples + \"\\n#define NUM_RINGS \" + rings + \"\\n#define BLOCKER_SEARCH_NUM_SAMPLES NUM_SAMPLES\\n#define PCF_NUM_SAMPLES NUM_SAMPLES\\n\\nvec2 poissonDisk[NUM_SAMPLES];\\n\\nvoid initPoissonSamples(const in vec2 randomSeed) {\\n\\tfloat ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);\\n\\tfloat INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);\\n\\tfloat angle = rand(randomSeed) * PI2;\\n\\tfloat radius = INV_NUM_SAMPLES;\\n\\tfloat radiusStep = radius;\\n\\tfor (int i = 0; i < NUM_SAMPLES; i++) {\\n\\t\\tpoissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);\\n\\t\\tradius += radiusStep;\\n\\t\\tangle += ANGLE_STEP;\\n\\t}\\n}\\n\\nfloat penumbraSize(const in float zReceiver, const in float zBlocker) { // Parallel plane estimation\\n\\treturn (zReceiver - zBlocker) / zBlocker;\\n}\\n\\nfloat findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver) {\\n\\tfloat searchRadius = LIGHT_SIZE_UV * (zReceiver - NEAR_PLANE) / zReceiver;\\n\\tfloat blockerDepthSum = 0.0;\\n\\tint numBlockers = 0;\\n\\tfor (int i = 0; i < BLOCKER_SEARCH_NUM_SAMPLES; i++) {\\n\\t\\tfloat shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));\\n\\t\\tif (shadowMapDepth < zReceiver) {\\n\\t\\t\\tblockerDepthSum += shadowMapDepth;\\n\\t\\t\\tnumBlockers++;\\n\\t\\t}\\n\\t}\\n\\tif (numBlockers == 0) return -1.0;\\n\\treturn blockerDepthSum / float(numBlockers);\\n}\\n\\nfloat PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {\\n\\tfloat sum = 0.0;\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[ i ] * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[ i ].yx * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\treturn sum / (2.0 * float(PCF_NUM_SAMPLES));\\n}\\n\\nfloat PCSS(sampler2D shadowMap, vec4 coords) {\\n\\tvec2 uv = coords.xy;\\n\\tfloat zReceiver = coords.z; // Assumed to be eye-space z in this code\\n\\tinitPoissonSamples(uv);\\n\\tfloat avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);\\n\\tif (avgBlockerDepth == -1.0) return 1.0;\\n\\tfloat penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\\n\\tfloat filterRadius = penumbraRatio * LIGHT_SIZE_UV * NEAR_PLANE / zReceiver;\\n\\treturn PCF_Filter(shadowMap, uv, zReceiver, filterRadius);\\n}\";\n\nlet deployed = false;\n\nconst softShadows = props => {\n  // Avoid adding the effect twice, which may happen in HMR scenarios\n  if (!deployed) {\n    deployed = true;\n    let shader = ShaderChunk.shadowmap_pars_fragment;\n    shader = shader.replace('#ifdef USE_SHADOWMAP', '#ifdef USE_SHADOWMAP\\n' + pcss(_extends({}, props)));\n    shader = shader.replace('#if defined( SHADOWMAP_TYPE_PCF )', '\\nreturn PCSS(shadowMap, shadowCoord);\\n#if defined( SHADOWMAP_TYPE_PCF )');\n    ShaderChunk.shadowmap_pars_fragment = shader;\n  }\n};\n\nfunction shaderMaterial(uniforms, vertexShader, fragmentShader, onInit) {\n  return class extends ShaderMaterial {\n    constructor() {\n      const entries = Object.entries(uniforms); // Create unforms and shaders\n\n      super({\n        uniforms: entries.reduce((acc, [name, value]) => _extends({}, acc, {\n          [name]: {\n            value\n          }\n        }), {}),\n        vertexShader,\n        fragmentShader\n      }); // Create getter/setters\n\n      entries.forEach(([name]) => Object.defineProperty(this, name, {\n        get: () => this.uniforms[name].value,\n        set: v => this.uniforms[name].value = v\n      }));\n      if (onInit) onInit(this);\n    }\n\n  };\n}\n\nclass StarfieldMaterial extends ShaderMaterial {\n  constructor() {\n    super({\n      uniforms: {\n        time: {\n          value: 0.0\n        },\n        fade: {\n          value: 1.0\n        }\n      },\n      vertexShader: \"uniform float time;\\n      attribute float size;\\n      varying vec3 vColor;\\n      void main() {\\n        vColor = color;\\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));\\n        gl_Position = projectionMatrix * mvPosition;\\n      }\",\n      fragmentShader: \"uniform sampler2D pointTexture;\\n      uniform float fade;\\n      varying vec3 vColor;\\n      void main() {\\n        float opacity = 1.0;\\n        if (fade == 1.0) {\\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\\n        }\\n        gl_FragColor = vec4(vColor, opacity);\\n      }\"\n    });\n  }\n\n}\n\nextend({\n  StarfieldMaterial\n});\n\nconst genStar = r => {\n  return new Vector3().setFromSpherical(new Spherical(r, Math.acos(1 - Math.random() * 2), Math.random() * 2 * Math.PI));\n};\n\nconst Stars = /*#__PURE__*/forwardRef(({\n  radius = 100,\n  depth = 50,\n  count = 5000,\n  saturation = 0,\n  factor = 4,\n  fade = false\n}, ref) => {\n  const material = useRef();\n  const [position, color, size] = useMemo(() => {\n    const positions = [];\n    const colors = [];\n    const sizes = Array.from({\n      length: count\n    }, () => (0.5 + 0.5 * Math.random()) * factor);\n    const color = new Color();\n    let r = radius + depth;\n    const increment = depth / count;\n\n    for (let i = 0; i < count; i++) {\n      r -= increment * Math.random();\n      positions.push(...genStar(r).toArray());\n      color.setHSL(i / count, saturation, 0.9);\n      colors.push(color.r, color.g, color.b);\n    }\n\n    return [new Float32Array(positions), new Float32Array(colors), new Float32Array(sizes)];\n  }, [count, depth, factor, radius, saturation]);\n  useFrame(state => material.current && (material.current.uniforms.time.value = state.clock.getElapsedTime()));\n  return /*#__PURE__*/React.createElement(\"points\", {\n    ref: ref\n  }, /*#__PURE__*/React.createElement(\"bufferGeometry\", {\n    attach: \"geometry\"\n  }, /*#__PURE__*/React.createElement(\"bufferAttribute\", {\n    attachObject: ['attributes', 'position'],\n    args: [position, 3]\n  }), /*#__PURE__*/React.createElement(\"bufferAttribute\", {\n    attachObject: ['attributes', 'color'],\n    args: [color, 3]\n  }), /*#__PURE__*/React.createElement(\"bufferAttribute\", {\n    attachObject: ['attributes', 'size'],\n    args: [size, 1]\n  })), /*#__PURE__*/React.createElement(\"starfieldMaterial\", {\n    ref: material,\n    attach: \"material\",\n    blending: AdditiveBlending,\n    \"uniforms-fade-value\": fade,\n    transparent: true,\n    vertexColors: true\n  }));\n});\nextend({\n  SkyImpl: Sky$1\n});\nconst Sky = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    distance = 450000,\n    sunPosition = [0, 1, 0]\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"distance\", \"sunPosition\"]);\n\n  const scale = useMemo(() => new Vector3().setScalar(distance), [distance]);\n  return /*#__PURE__*/React.createElement(\"skyImpl\", _extends({\n    ref: ref,\n    \"material-uniforms-sunPosition-value\": sunPosition,\n    scale: scale\n  }, props));\n});\nextend({\n  ReflectorImpl: Reflector$1\n});\nconst Reflector = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    children,\n    color,\n    textureWidth,\n    textureHeight,\n    clipBias,\n    shader,\n    encoding\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"color\", \"textureWidth\", \"textureHeight\", \"clipBias\", \"shader\", \"encoding\"]);\n\n  return /*#__PURE__*/React.createElement(\"reflectorImpl\", _extends({\n    ref: ref,\n    args: [undefined, {\n      color,\n      textureWidth,\n      textureHeight,\n      clipBias,\n      shader,\n      encoding\n    }]\n  }, props), React.Children.only(children));\n});\n\nlet _inverseMatrix = new Matrix4();\n\nlet _ray = new Ray();\n\nlet _sphere = new Sphere$1();\n\nlet _vA = new Vector3();\n\nfunction meshBounds(raycaster, intersects) {\n  let geometry = this.geometry;\n  let material = this.material;\n  let matrixWorld = this.matrixWorld;\n  if (material === undefined) return; // Checking boundingSphere distance to ray\n\n  if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n  _sphere.copy(geometry.boundingSphere);\n\n  _sphere.applyMatrix4(matrixWorld);\n\n  if (raycaster.ray.intersectsSphere(_sphere) === false) return;\n\n  _inverseMatrix.getInverse(matrixWorld);\n\n  _ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix); // Check boundingBox before continuing\n\n\n  if (geometry.boundingBox !== null && _ray.intersectBox(geometry.boundingBox, _vA) === null) return;\n  intersects.push({\n    distance: _vA.distanceTo(raycaster.ray.origin),\n    point: _vA.clone(),\n    object: this\n  });\n}\n\nfunction useCamera(camera, props) {\n  const {\n    mouse\n  } = useThree();\n  const [raycast] = useState(() => {\n    let raycaster = new Raycaster();\n    if (props) applyProps(raycaster, props, {});\n    return function (_, intersects) {\n      raycaster.setFromCamera(mouse, camera instanceof Camera ? camera : camera.current);\n      const rc = this.constructor.prototype.raycast.bind(this);\n      if (rc) rc(raycaster, intersects);\n    };\n  });\n  return raycast;\n}\n\nfunction useHelper(object3D, proto, ...args) {\n  const helper = React.useRef();\n  const {\n    scene\n  } = useThree();\n  useEffect(() => {\n    if (proto && object3D.current) {\n      helper.current = new proto(object3D.current, ...args);\n\n      if (helper.current) {\n        scene.add(helper.current);\n      }\n    }\n\n    return () => {\n      if (helper.current) {\n        scene.remove(helper.current);\n      }\n    };\n  }, [scene, proto, object3D, args]);\n  useFrame(() => {\n    if (helper.current) {\n      helper.current.update();\n    }\n  });\n  return helper;\n}\n\nfunction useAspect(type, width, height, factor = 1) {\n  const {\n    viewport: v,\n    aspect\n  } = useThree();\n  const adaptedHeight = height * (aspect > width / height ? v.width / width : v.height / height);\n  const adaptedWidth = width * (aspect > width / height ? v.width / width : v.height / height);\n  return [adaptedWidth * factor, adaptedHeight * factor, 1];\n}\n\nconst eps = 0.00001;\n\nfunction createShape(width, height, radius0) {\n  const shape = new Shape();\n  const radius = radius0 - eps;\n  shape.absarc(eps, eps, eps, -Math.PI / 2, -Math.PI, true);\n  shape.absarc(eps, height - radius * 2, eps, Math.PI, Math.PI / 2, true);\n  shape.absarc(width - radius * 2, height - radius * 2, eps, Math.PI / 2, 0, true);\n  shape.absarc(width - radius * 2, eps, eps, 0, -Math.PI / 2, true);\n  return shape;\n}\n\nconst RoundedBox = /*#__PURE__*/forwardRef(function RoundedBox(_ref, ref) {\n  let {\n    args: [width = 1, height = 1, depth = 1] = [],\n    radius = 0.05,\n    smoothness = 4,\n    children\n  } = _ref,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"args\", \"radius\", \"smoothness\", \"children\"]);\n\n  const shape = useMemo(() => createShape(width, height, radius), [width, height, radius]);\n  const params = useMemo(() => ({\n    depth: depth - radius * 2,\n    bevelEnabled: true,\n    bevelSegments: smoothness * 2,\n    steps: 1,\n    bevelSize: radius - eps,\n    bevelThickness: radius,\n    curveSegments: smoothness\n  }), [depth, radius, smoothness]);\n  const geomRef = useUpdate(geometry => void geometry.center(), [shape, params]);\n  return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n    ref: ref\n  }, rest), /*#__PURE__*/React.createElement(\"extrudeBufferGeometry\", {\n    attach: \"geometry\",\n    ref: geomRef,\n    args: [shape, params]\n  }), children);\n});\n\nfunction useTextureLoader(url) {\n  return useLoader(TextureLoader, url);\n}\n\nfunction draco(url = '/draco-gltf/') {\n  return loader => {\n    const dracoLoader = new DRACOLoader();\n    dracoLoader.setDecoderPath(url);\n    loader.setDRACOLoader(dracoLoader);\n  };\n}\n\nfunction useGLTFLoader(path, useDraco) {\n  const gltf = useLoader(GLTFLoader, path, useDraco ? draco(typeof useDraco === 'string' ? useDraco : '/draco-gltf/') : undefined);\n  return gltf;\n}\n\nfunction useCubeTextureLoader(files, {\n  path\n}) {\n  // @ts-ignore\n  const [cubeTexture] = useLoader( // @ts-ignore\n  CubeTextureLoader, [files], loader => loader.setPath(path));\n  return cubeTexture;\n}\n\nconst useProgress = create$1(set => {\n  DefaultLoadingManager.onStart = (item, loaded, total) => set({\n    active: true,\n    item,\n    loaded,\n    total,\n    progress: loaded / total * 100\n  });\n\n  DefaultLoadingManager.onLoad = () => set({\n    active: false\n  });\n\n  DefaultLoadingManager.onError = item => set(state => ({\n    errors: [...state.errors, item]\n  }));\n\n  DefaultLoadingManager.onProgress = (item, loaded, total) => set({\n    item,\n    loaded,\n    total,\n    progress: loaded / total * 100\n  });\n\n  return {\n    errors: [],\n    active: false,\n    progress: 0,\n    item: '',\n    loaded: 0,\n    total: 0\n  };\n});\nexport { Billboard, Box, Circle, Cone, Cylinder, Detailed, DeviceOrientationControls, Dodecahedron, Extrude, FlyControls, HTML, Html, Icosahedron, Lathe, Line, MapControls, MeshDistortMaterial, MeshWobbleMaterial, Octahedron, OrbitControls, OrthographicCamera, Parametric, PerspectiveCamera, Plane, Polyhedron, PositionalAudio, Reflector, Ring, RoundedBox, Shadow, Sky, Sphere, Stars, Stats, Tetrahedron, Text, Torus, TorusKnot, TrackballControls, TransformControls, Tube, draco, meshBounds, shaderMaterial, softShadows, useAspect, useCamera, useCubeTextureLoader, useGLTFLoader, useHelper, useProgress, useTextureLoader };","map":{"version":3,"sources":["/Users/satishp/Projects/demo3d/node_modules/drei/dist/index.js"],"names":["_extends","React","forwardRef","useRef","useEffect","useLayoutEffect","useState","useMemo","Children","createElement","extend","useThree","useFrame","useUpdate","useLoader","addEffect","addAfterEffect","applyProps","OrbitControls","OrbitControls$1","MapControls","MapControls$1","mergeRefs","TrackballControls","TrackballControls$1","DeviceOrientationControls","DeviceOrientationControls$1","_objectWithoutPropertiesLoose","TransformControls","TransformControls$1","pick","omit","FlyControls","FlyControls$1","AudioListener","AudioLoader","Vector2","Vector3","PerspectiveCamera","PerspectiveCamera$1","OrthographicCamera","OrthographicCamera$1","Color","MeshStandardMaterial","MeshPhysicalMaterial","ShaderChunk","ShaderMaterial","Spherical","AdditiveBlending","Matrix4","Ray","Sphere","Sphere$1","Raycaster","Camera","Shape","TextureLoader","CubeTextureLoader","DefaultLoadingManager","LineGeometry","LineMaterial","Line2","Text","Text$1","ReactDOM","StatsImpl","_defineProperty","Sky","Sky$1","Reflector","Reflector$1","GLTFLoader","DRACOLoader","create$1","OrbitControlsImpl","props","enableDamping","ref","controls","camera","gl","invalidate","_controls$current","current","update","_controls","addEventListener","removeEventListener","args","domElement","MapControlsImpl","TrackballControlsImpl","DeviceOrientationControlsImp","currentControl","connect","dispose","TransformControlsImpl","_ref","children","transformOnlyPropNames","transformProps","objectProps","group","attach","Fragment","FlyControlsImpl","state","delta","Detailed","distances","lod","levels","length","forEach","object","index","push","distance","_lod$current","PositionalAudio","url","loop","sound","listener","buffer","_sound","setBuffer","setRefDistance","setLoop","play","add","remove","stop","disconnect","create","type","El","Box","Circle","Cone","Cylinder","Plane","Tube","Torus","TorusKnot","Tetrahedron","Ring","Polyhedron","Icosahedron","Octahedron","Dodecahedron","Extrude","Lathe","Parametric","Billboard","follow","lockX","lockY","lockZ","localRef","prev","x","rotation","y","z","lookAt","position","Line","points","color","vertexColors","lineWidth","rest","lineRef","geomRef","resolution","setPositions","flat","setColors","computeLineDistances","Boolean","linewidth","TextMeshImpl","anchorX","anchorY","textRef","baseMtl","setBaseMtl","nodes","text","n","t","child","material","sync","makeDefault","setDefaultCamera","size","cameraRef","cam","aspect","width","height","updateProjectionMatrix","oldCam","left","right","top","bottom","v1","v2","v3","calculatePosition","el","objectPos","setFromMatrixPosition","matrixWorld","project","widthHalf","heightHalf","isObjectBehindCamera","cameraPos","deltaCamObj","sub","camDir","getWorldDirection","angleTo","Math","PI","objectScale","vFOV","fov","dist","distanceTo","tan","zoom","objectZIndex","zIndexRange","A","far","near","B","round","undefined","Html","_portal$current","eps","style","className","prepend","center","fullscreen","portal","scaleFactor","scene","document","old","target","parentNode","updateMatrixWorld","vec","cssText","appendChild","removeChild","unmountComponentAtNode","styles","transform","render","abs","display","scale","zIndex","HTML","console","warn","Shadow","fog","colorStop","opacity","canvas","context","getContext","gradient","createRadialGradient","addColorStop","getStyle","fillStyle","fillRect","transparent","Stats","showPanel","parent","stats","node","body","dom","classList","begin","end","WobbleMaterialImpl","constructor","parameters","setValues","_time","value","_factor","onBeforeCompile","shader","uniforms","time","factor","vertexShader","replace","v","MeshWobbleMaterial","speed","clock","getElapsedTime","distort","DistortMaterialImpl","_distort","_radius","radius","MeshDistortMaterial","pcss","frustrum","samples","rings","deployed","softShadows","shadowmap_pars_fragment","shaderMaterial","fragmentShader","onInit","entries","Object","reduce","acc","name","defineProperty","get","set","StarfieldMaterial","fade","genStar","r","setFromSpherical","acos","random","Stars","depth","count","saturation","positions","colors","sizes","Array","from","increment","i","toArray","setHSL","g","b","Float32Array","attachObject","blending","SkyImpl","sunPosition","setScalar","ReflectorImpl","textureWidth","textureHeight","clipBias","encoding","only","_inverseMatrix","_ray","_sphere","_vA","meshBounds","raycaster","intersects","geometry","boundingSphere","computeBoundingSphere","copy","applyMatrix4","ray","intersectsSphere","getInverse","boundingBox","intersectBox","origin","point","clone","useCamera","mouse","raycast","_","setFromCamera","rc","prototype","bind","useHelper","object3D","proto","helper","useAspect","viewport","adaptedHeight","adaptedWidth","createShape","radius0","shape","absarc","RoundedBox","smoothness","params","bevelEnabled","bevelSegments","steps","bevelSize","bevelThickness","curveSegments","useTextureLoader","draco","loader","dracoLoader","setDecoderPath","setDRACOLoader","useGLTFLoader","path","useDraco","gltf","useCubeTextureLoader","files","cubeTexture","setPath","useProgress","onStart","item","loaded","total","active","progress","onLoad","onError","errors","onProgress"],"mappings":"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","sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport React, { forwardRef, useRef, useEffect, useLayoutEffect, useState, useMemo, Children, createElement } from 'react';\nimport { extend, useThree, useFrame, useUpdate, useLoader, addEffect, addAfterEffect, applyProps } from 'react-three-fiber';\nimport { OrbitControls as OrbitControls$1, MapControls as MapControls$1 } from 'three/examples/jsm/controls/OrbitControls';\nimport mergeRefs from 'react-merge-refs';\nimport { TrackballControls as TrackballControls$1 } from 'three/examples/jsm/controls/TrackballControls';\nimport { DeviceOrientationControls as DeviceOrientationControls$1 } from 'three/examples/jsm/controls/DeviceOrientationControls';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { TransformControls as TransformControls$1 } from 'three/examples/jsm/controls/TransformControls';\nimport pick from 'lodash.pick';\nimport omit from 'lodash.omit';\nimport { FlyControls as FlyControls$1 } from 'three/examples/jsm/controls/FlyControls';\nimport { AudioListener, AudioLoader, Vector2, Vector3, PerspectiveCamera as PerspectiveCamera$1, OrthographicCamera as OrthographicCamera$1, Color, MeshStandardMaterial, MeshPhysicalMaterial, ShaderChunk, ShaderMaterial, Spherical, AdditiveBlending, Matrix4, Ray, Sphere as Sphere$1, Raycaster, Camera, Shape, TextureLoader, CubeTextureLoader, DefaultLoadingManager } from 'three';\nimport { LineGeometry } from 'three/examples/jsm/lines/LineGeometry';\nimport { LineMaterial } from 'three/examples/jsm/lines/LineMaterial';\nimport { Line2 } from 'three/examples/jsm/lines/Line2';\nimport { Text as Text$1 } from 'troika-three-text';\nimport ReactDOM from 'react-dom';\nimport * as StatsImpl from 'three/examples/js/libs/stats.min';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Sky as Sky$1 } from 'three/examples/jsm/objects/Sky';\nimport { Reflector as Reflector$1 } from 'three/examples/jsm/objects/Reflector';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader';\nimport create$1 from 'zustand';\n\nextend({\n  OrbitControlsImpl: OrbitControls$1\n});\nconst OrbitControls = /*#__PURE__*/forwardRef((props = {\n  enableDamping: true\n}, ref) => {\n  const controls = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useFrame(() => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(() => {\n    const _controls = controls.current;\n    _controls == null ? void 0 : _controls.addEventListener('change', invalidate);\n    return () => _controls == null ? void 0 : _controls.removeEventListener('change', invalidate);\n  }, [invalidate]);\n  return /*#__PURE__*/React.createElement(\"orbitControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\n\nextend({\n  MapControlsImpl: MapControls$1\n});\nconst MapControls = /*#__PURE__*/forwardRef((props = {\n  enableDamping: true\n}, ref) => {\n  const controls = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useFrame(() => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(() => {\n    const _controls = controls.current;\n    _controls == null ? void 0 : _controls.addEventListener('change', invalidate);\n    return () => _controls == null ? void 0 : _controls.removeEventListener('change', invalidate);\n  }, [invalidate]);\n  return /*#__PURE__*/React.createElement(\"mapControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\n\nextend({\n  TrackballControlsImpl: TrackballControls$1\n});\nconst TrackballControls = /*#__PURE__*/forwardRef((props, ref) => {\n  const controls = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useFrame(() => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(() => {\n    const _controls = controls.current;\n    _controls == null ? void 0 : _controls.addEventListener('change', invalidate);\n    return () => _controls == null ? void 0 : _controls.removeEventListener('change', invalidate);\n  }, [invalidate]);\n  return /*#__PURE__*/React.createElement(\"trackballControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, props));\n});\n\nextend({\n  DeviceOrientationControlsImp: DeviceOrientationControls$1\n});\nconst DeviceOrientationControls = /*#__PURE__*/forwardRef((props, ref) => {\n  const controls = useRef();\n  const {\n    camera\n  } = useThree();\n  useFrame(() => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(() => {\n    const currentControl = controls.current;\n    currentControl == null ? void 0 : currentControl.connect();\n    return () => currentControl == null ? void 0 : currentControl.dispose();\n  });\n  return /*#__PURE__*/React.createElement(\"deviceOrientationControlsImp\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera]\n  }, props));\n});\n\nextend({\n  TransformControlsImpl: TransformControls$1\n});\nconst TransformControls = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n\n  const transformOnlyPropNames = ['enabled', 'axis', 'mode', 'translationSnap', 'rotationSnap', 'scaleSnap', 'space', 'size', 'dragging', 'showX', 'showY', 'showZ'];\n  const transformProps = pick(props, transformOnlyPropNames);\n  const objectProps = omit(props, transformOnlyPropNames);\n  const controls = useRef();\n  const group = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useLayoutEffect(() => {\n    var _controls$current;\n\n    return void ((_controls$current = controls.current) == null ? void 0 : _controls$current.attach(group.current));\n  }, [children]);\n  useEffect(() => {\n    const _controls = controls.current;\n    _controls == null ? void 0 : _controls.addEventListener('change', invalidate);\n    return () => _controls == null ? void 0 : _controls.removeEventListener('change', invalidate);\n  }, [invalidate]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"transformControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, transformProps)), /*#__PURE__*/React.createElement(\"group\", _extends({\n    ref: group\n  }, objectProps), children));\n});\n\nextend({\n  FlyControlsImpl: FlyControls$1\n});\nconst FlyControls = /*#__PURE__*/forwardRef((props, ref) => {\n  const controls = useRef();\n  const {\n    camera,\n    gl\n  } = useThree();\n  useFrame((state, delta) => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update(delta);\n  });\n  return /*#__PURE__*/React.createElement(\"flyControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, props));\n});\n\nconst Detailed = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    children,\n    distances\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"distances\"]);\n\n  const lod = useUpdate(lod => {\n    lod.levels.length = 0;\n    lod.children.forEach((object, index) => lod.levels.push({\n      object,\n      distance: distances[index]\n    }));\n  }, []);\n  useFrame(state => {\n    var _lod$current;\n\n    return (_lod$current = lod.current) == null ? void 0 : _lod$current.update(state.camera);\n  });\n  return /*#__PURE__*/React.createElement(\"lOD\", _extends({\n    ref: mergeRefs([lod, ref])\n  }, props), children);\n});\n\nconst PositionalAudio = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    url,\n    distance = 1,\n    loop = true\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"url\", \"distance\", \"loop\"]);\n\n  const sound = useRef();\n  const {\n    camera\n  } = useThree();\n  const [listener] = useState(() => new AudioListener());\n  const buffer = useLoader(AudioLoader, url);\n  useEffect(() => {\n    const _sound = sound.current;\n\n    if (_sound) {\n      _sound.setBuffer(buffer);\n\n      _sound.setRefDistance(distance);\n\n      _sound.setLoop(loop);\n\n      _sound.play();\n    }\n\n    camera.add(listener);\n    return () => {\n      camera.remove(listener);\n\n      if (_sound) {\n        _sound.stop();\n\n        _sound.disconnect();\n      }\n    };\n  }, [buffer, camera, distance, listener, loop]);\n  return /*#__PURE__*/React.createElement(\"positionalAudio\", _extends({\n    ref: mergeRefs([sound, ref]),\n    args: [listener]\n  }, props));\n});\n\nfunction create(type) {\n  const El = type + 'BufferGeometry';\n  return /*#__PURE__*/forwardRef((_ref, ref) => {\n    let {\n      args,\n      children\n    } = _ref,\n        props = _objectWithoutPropertiesLoose(_ref, [\"args\", \"children\"]);\n\n    return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n      ref: ref\n    }, props), /*#__PURE__*/React.createElement(El, {\n      attach: \"geometry\",\n      args: args\n    }), children);\n  });\n}\n\nconst Box = create('box');\nconst Circle = create('circle');\nconst Cone = create('cone');\nconst Cylinder = create('cylinder');\nconst Sphere = create('sphere');\nconst Plane = create('plane');\nconst Tube = create('tube');\nconst Torus = create('torus');\nconst TorusKnot = create('torusKnot');\nconst Tetrahedron = create('tetrahedron');\nconst Ring = create('ring');\nconst Polyhedron = create('polyhedron');\nconst Icosahedron = create('icosahedron');\nconst Octahedron = create('octahedron');\nconst Dodecahedron = create('dodecahedron');\nconst Extrude = create('extrude');\nconst Lathe = create('lathe');\nconst Parametric = create('parametric');\n\nconst Billboard = /*#__PURE__*/forwardRef(function Billboard(_ref, ref) {\n  let {\n    follow = true,\n    lockX = false,\n    lockY = false,\n    lockZ = false\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"follow\", \"lockX\", \"lockY\", \"lockZ\"]);\n\n  const localRef = useRef();\n  useFrame(({\n    camera\n  }) => {\n    if (!follow) return;\n\n    if (localRef.current) {\n      const prev = {\n        x: localRef.current.rotation.x,\n        y: localRef.current.rotation.y,\n        z: localRef.current.rotation.z\n      };\n      localRef.current.lookAt(camera.position); // readjust any axis that is locked\n\n      if (lockX) localRef.current.rotation.x = prev.x;\n      if (lockY) localRef.current.rotation.y = prev.y;\n      if (lockZ) localRef.current.rotation.z = prev.z;\n    }\n  });\n  return /*#__PURE__*/React.createElement(Plane, _extends({\n    ref: mergeRefs([localRef, ref])\n  }, props));\n});\n\nextend({\n  Line2,\n  LineGeometry,\n  LineMaterial\n});\nconst Line = /*#__PURE__*/React.forwardRef(function Line(_ref, ref) {\n  let {\n    points,\n    color = 'black',\n    vertexColors,\n    lineWidth\n  } = _ref,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"points\", \"color\", \"vertexColors\", \"lineWidth\"]);\n\n  const lineRef = useRef();\n  const geomRef = useRef();\n  const resolution = useMemo(() => new Vector2(512, 512), []);\n  useEffect(() => {\n    if (!geomRef.current || !lineRef.current) return;\n    geomRef.current.setPositions(points.flat());\n    if (vertexColors) geomRef.current.setColors(vertexColors.flat());\n    lineRef.current.computeLineDistances();\n  }, [points, vertexColors]);\n  return /*#__PURE__*/React.createElement(\"line2\", _extends({\n    ref: mergeRefs([lineRef, ref])\n  }, rest), /*#__PURE__*/React.createElement(\"lineGeometry\", {\n    attach: \"geometry\",\n    ref: geomRef\n  }), /*#__PURE__*/React.createElement(\"lineMaterial\", _extends({\n    attach: \"material\",\n    color: color,\n    vertexColors: Boolean(vertexColors),\n    resolution: resolution,\n    linewidth: lineWidth\n  }, rest)));\n});\n\nextend({\n  TextMeshImpl: Text$1\n});\nconst Text = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    anchorX = 'center',\n    anchorY = 'middle',\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"anchorX\", \"anchorY\", \"children\"]);\n\n  const {\n    invalidate\n  } = useThree();\n  const textRef = useRef();\n  const [baseMtl, setBaseMtl] = useState();\n  const [nodes, text] = useMemo(() => {\n    let n = [];\n    let t = '';\n    Children.forEach(children, child => {\n      if (typeof child === 'string') {\n        t += child;\n      } else if (child && typeof child === 'object' && child.props.attach === 'material') {\n        // Instantiate the base material and grab a reference to it, but don't assign any\n        // props, and assign it as the `material`, which Troika will replace behind the scenes.\n        n.push( /*#__PURE__*/createElement(child.type, {\n          ref: setBaseMtl,\n          attach: 'material'\n        })); // Once the base material has been assigned, grab the resulting upgraded material,\n        // and apply the original material props to that.\n\n        if (baseMtl) {\n          n.push( /*#__PURE__*/React.createElement(\"primitive\", _extends({\n            object: textRef.current.material\n          }, child.props, {\n            attach: null\n          })));\n        }\n      } else {\n        n.push(child);\n      }\n    });\n    return [n, t];\n  }, [children, baseMtl]);\n  useLayoutEffect(() => void textRef.current.sync(invalidate));\n  return /*#__PURE__*/React.createElement(\"textMeshImpl\", _extends({\n    ref: mergeRefs([textRef, ref]),\n    text: text,\n    anchorX: anchorX,\n    anchorY: anchorY\n  }, props), nodes);\n});\n\nconst PerspectiveCamera = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    makeDefault = false\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"makeDefault\"]);\n\n  const {\n    setDefaultCamera,\n    camera,\n    size\n  } = useThree();\n  const cameraRef = useUpdate(cam => {\n    cam.aspect = size.width / size.height;\n    cam.updateProjectionMatrix();\n  }, [size, props]);\n  useLayoutEffect(() => {\n    if (makeDefault && cameraRef.current) {\n      const oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return () => setDefaultCamera(oldCam);\n    }\n  }, [camera, cameraRef, makeDefault, setDefaultCamera]);\n  return /*#__PURE__*/React.createElement(\"perspectiveCamera\", _extends({\n    ref: mergeRefs([cameraRef, ref])\n  }, props));\n});\n\nconst OrthographicCamera = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    children,\n    makeDefault = false\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"makeDefault\"]);\n\n  const {\n    setDefaultCamera,\n    camera,\n    size\n  } = useThree();\n  const cameraRef = useUpdate(cam => cam.updateProjectionMatrix(), [size, props]);\n  useLayoutEffect(() => {\n    if (makeDefault && cameraRef.current) {\n      const oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return () => setDefaultCamera(oldCam);\n    }\n  }, [camera, cameraRef, makeDefault, setDefaultCamera]);\n  return /*#__PURE__*/React.createElement(\"orthographicCamera\", _extends({\n    left: size.width / -2,\n    right: size.width / 2,\n    top: size.height / 2,\n    bottom: size.height / -2,\n    ref: mergeRefs([cameraRef, ref])\n  }, props), children);\n});\n\nconst v1 = new Vector3();\nconst v2 = new Vector3();\nconst v3 = new Vector3();\n\nfunction calculatePosition(el, camera, size) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  const widthHalf = size.width / 2;\n  const heightHalf = size.height / 2;\n  return [objectPos.x * widthHalf + widthHalf, -(objectPos.y * heightHalf) + heightHalf];\n}\n\nfunction isObjectBehindCamera(el, camera) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n  const deltaCamObj = objectPos.sub(cameraPos);\n  const camDir = camera.getWorldDirection(v3);\n  return deltaCamObj.angleTo(camDir) > Math.PI / 2;\n}\n\nfunction objectScale(el, camera) {\n  if (camera instanceof PerspectiveCamera$1) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const vFOV = camera.fov * Math.PI / 180;\n    const dist = objectPos.distanceTo(cameraPos);\n    return 1 / (2 * Math.tan(vFOV / 2) * dist);\n  }\n\n  if (camera instanceof OrthographicCamera$1) return camera.zoom;\n  return 1;\n}\n\nfunction objectZIndex(el, camera, zIndexRange) {\n  if (camera instanceof PerspectiveCamera$1 || camera instanceof OrthographicCamera$1) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const dist = objectPos.distanceTo(cameraPos);\n    const A = (zIndexRange[1] - zIndexRange[0]) / (camera.far - camera.near);\n    const B = zIndexRange[1] - A * camera.far;\n    return Math.round(A * dist + B);\n  }\n\n  return undefined;\n}\n\nconst Html = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  var _portal$current;\n\n  let {\n    children,\n    eps = 0.001,\n    style,\n    className,\n    prepend,\n    center,\n    fullscreen,\n    portal,\n    scaleFactor,\n    zIndexRange = [16777271, 0]\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"eps\", \"style\", \"className\", \"prepend\", \"center\", \"fullscreen\", \"portal\", \"scaleFactor\", \"zIndexRange\"]);\n\n  const {\n    gl,\n    scene,\n    camera,\n    size\n  } = useThree();\n  const [el] = useState(() => document.createElement('div'));\n  const group = useRef(null);\n  const old = useRef([0, 0]);\n  const target = (_portal$current = portal == null ? void 0 : portal.current) != null ? _portal$current : gl.domElement.parentNode;\n  useEffect(() => {\n    if (group.current) {\n      scene.updateMatrixWorld();\n      const vec = calculatePosition(group.current, camera, size);\n      el.style.cssText = \"position:absolute;top:0;left:0;transform:translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0);transform-origin:0 0;\";\n\n      if (target) {\n        if (prepend) target.prepend(el);else target.appendChild(el);\n      }\n\n      return () => {\n        if (target) target.removeChild(el);\n        ReactDOM.unmountComponentAtNode(el);\n      };\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [target]);\n  const styles = useMemo(() => _extends({\n    position: 'absolute',\n    transform: center ? 'translate3d(-50%,-50%,0)' : 'none'\n  }, fullscreen && {\n    top: -size.height / 2,\n    left: -size.width / 2,\n    width: size.width,\n    height: size.height\n  }, style), [style, center, fullscreen, size]);\n  useEffect(() => void ReactDOM.render( /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    style: styles,\n    className: className,\n    children: children\n  }), el));\n  useFrame(() => {\n    if (group.current) {\n      const vec = calculatePosition(group.current, camera, size);\n\n      if (Math.abs(old.current[0] - vec[0]) > eps || Math.abs(old.current[1] - vec[1]) > eps) {\n        el.style.display = !isObjectBehindCamera(group.current, camera) ? 'block' : 'none';\n        const scale = scaleFactor === undefined ? 1 : objectScale(group.current, camera) * scaleFactor;\n        el.style.transform = \"translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0) scale(\" + scale + \")\";\n        el.style.zIndex = \"\" + objectZIndex(group.current, camera, zIndexRange);\n      }\n\n      old.current = vec;\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", _extends({}, props, {\n    ref: group\n  }));\n});\nconst HTML = /*#__PURE__*/React.forwardRef((props, ref) => {\n  useEffect(() => void console.warn('The <HTML> component was renamed to <Html>'), []);\n  return /*#__PURE__*/React.createElement(Html, _extends({}, props, {\n    ref: ref\n  }));\n});\n\nconst Shadow = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    fog = false,\n    colorStop = 0.0,\n    color = 'black',\n    opacity = 0.5\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"fog\", \"colorStop\", \"color\", \"opacity\"]);\n\n  const canvas = useMemo(() => {\n    let canvas = document.createElement('canvas');\n    canvas.width = 128;\n    canvas.height = 128;\n    let context = canvas.getContext('2d');\n    let gradient = context.createRadialGradient(canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2);\n    gradient.addColorStop(colorStop, new Color(color).getStyle());\n    gradient.addColorStop(1, 'rgba(0,0,0,0)');\n    context.fillStyle = gradient;\n    context.fillRect(0, 0, canvas.width, canvas.height);\n    return canvas;\n  }, [color, colorStop]);\n  return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n    ref: ref\n  }, props), /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [1, 1]\n  }), /*#__PURE__*/React.createElement(\"meshBasicMaterial\", {\n    attach: \"material\",\n    transparent: true,\n    opacity: opacity,\n    fog: fog\n  }, /*#__PURE__*/React.createElement(\"canvasTexture\", {\n    attach: \"map\",\n    args: [canvas]\n  })));\n});\n\nfunction Stats({\n  showPanel = 0,\n  className,\n  parent\n}) {\n  const [stats] = useState(() => new StatsImpl());\n  useEffect(() => {\n    const node = parent && parent.current || document.body;\n    stats.showPanel(showPanel);\n    node == null ? void 0 : node.appendChild(stats.dom);\n    if (className) stats.dom.classList.add(className);\n    const begin = addEffect(() => stats.begin());\n    const end = addAfterEffect(() => stats.end());\n    return () => {\n      node == null ? void 0 : node.removeChild(stats.dom);\n      begin();\n      end();\n    };\n  }, [parent]);\n  return null;\n}\n\nclass WobbleMaterialImpl extends MeshStandardMaterial {\n  constructor(parameters) {\n    super(parameters);\n\n    _defineProperty(this, \"_time\", void 0);\n\n    _defineProperty(this, \"_factor\", void 0);\n\n    this.setValues(parameters);\n    this._time = {\n      value: 0\n    };\n    this._factor = {\n      value: 1\n    };\n  }\n\n  onBeforeCompile(shader) {\n    shader.uniforms.time = this._time;\n    shader.uniforms.factor = this._factor;\n    shader.vertexShader = \"\\n      uniform float time;\\n      uniform float factor;\\n      \" + shader.vertexShader + \"\\n    \";\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"float theta = sin( time + position.y ) / 2.0 * factor;\\n        float c = cos( theta );\\n        float s = sin( theta );\\n        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );\\n        vec3 transformed = vec3( position ) * m;\\n        vNormal = vNormal * m;\");\n  }\n\n  get time() {\n    return this._time.value;\n  }\n\n  set time(v) {\n    this._time.value = v;\n  }\n\n  get factor() {\n    return this._factor.value;\n  }\n\n  set factor(v) {\n    this._factor.value = v;\n  }\n\n}\n\nextend({\n  WobbleMaterialImpl\n});\nconst MeshWobbleMaterial = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  let {\n    speed = 1\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"speed\"]);\n\n  const material = useRef();\n  useFrame(state => material.current && (material.current.time = state.clock.getElapsedTime() * speed));\n  return /*#__PURE__*/React.createElement(\"wobbleMaterialImpl\", _extends({\n    ref: mergeRefs([ref, material]),\n    attach: \"material\"\n  }, props));\n});\n\nvar distort = \"#define GLSLIFY 1\\nvec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}\"; // eslint-disable-line\n\nclass DistortMaterialImpl extends MeshPhysicalMaterial {\n  constructor(parameters) {\n    super(parameters);\n\n    _defineProperty(this, \"_time\", void 0);\n\n    _defineProperty(this, \"_distort\", void 0);\n\n    _defineProperty(this, \"_radius\", void 0);\n\n    this.setValues(parameters);\n    this._time = {\n      value: 0\n    };\n    this._distort = {\n      value: 0.4\n    };\n    this._radius = {\n      value: 1\n    };\n  }\n\n  onBeforeCompile(shader) {\n    shader.uniforms.time = this._time;\n    shader.uniforms.radius = this._radius;\n    shader.uniforms.distort = this._distort;\n    shader.vertexShader = \"\\n      uniform float time;\\n      uniform float radius;\\n      uniform float distort;\\n      \" + distort + \"\\n      \" + shader.vertexShader + \"\\n    \";\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n        float updateTime = time / 50.0;\\n        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));\\n        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));\\n        \");\n  }\n\n  get time() {\n    return this._time.value;\n  }\n\n  set time(v) {\n    this._time.value = v;\n  }\n\n  get distort() {\n    return this._distort.value;\n  }\n\n  set distort(v) {\n    this._distort.value = v;\n  }\n\n  get radius() {\n    return this._radius.value;\n  }\n\n  set radius(v) {\n    this._radius.value = v;\n  }\n\n}\n\nextend({\n  DistortMaterialImpl\n});\nconst MeshDistortMaterial = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  let {\n    speed = 1\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"speed\"]);\n\n  const material = useRef();\n  useFrame(state => material.current && (material.current.time = state.clock.getElapsedTime() * speed));\n  return /*#__PURE__*/React.createElement(\"distortMaterialImpl\", _extends({\n    ref: mergeRefs([ref, material]),\n    attach: \"material\"\n  }, props));\n});\n\nconst pcss = ({\n  frustrum = 3.75,\n  size = 0.005,\n  near = 9.5,\n  samples = 17,\n  rings = 11\n} = {}) => \"#define LIGHT_WORLD_SIZE \" + size + \"\\n#define LIGHT_FRUSTUM_WIDTH \" + frustrum + \"\\n#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)\\n#define NEAR_PLANE \" + near + \"\\n\\n#define NUM_SAMPLES \" + samples + \"\\n#define NUM_RINGS \" + rings + \"\\n#define BLOCKER_SEARCH_NUM_SAMPLES NUM_SAMPLES\\n#define PCF_NUM_SAMPLES NUM_SAMPLES\\n\\nvec2 poissonDisk[NUM_SAMPLES];\\n\\nvoid initPoissonSamples(const in vec2 randomSeed) {\\n\\tfloat ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);\\n\\tfloat INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);\\n\\tfloat angle = rand(randomSeed) * PI2;\\n\\tfloat radius = INV_NUM_SAMPLES;\\n\\tfloat radiusStep = radius;\\n\\tfor (int i = 0; i < NUM_SAMPLES; i++) {\\n\\t\\tpoissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);\\n\\t\\tradius += radiusStep;\\n\\t\\tangle += ANGLE_STEP;\\n\\t}\\n}\\n\\nfloat penumbraSize(const in float zReceiver, const in float zBlocker) { // Parallel plane estimation\\n\\treturn (zReceiver - zBlocker) / zBlocker;\\n}\\n\\nfloat findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver) {\\n\\tfloat searchRadius = LIGHT_SIZE_UV * (zReceiver - NEAR_PLANE) / zReceiver;\\n\\tfloat blockerDepthSum = 0.0;\\n\\tint numBlockers = 0;\\n\\tfor (int i = 0; i < BLOCKER_SEARCH_NUM_SAMPLES; i++) {\\n\\t\\tfloat shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));\\n\\t\\tif (shadowMapDepth < zReceiver) {\\n\\t\\t\\tblockerDepthSum += shadowMapDepth;\\n\\t\\t\\tnumBlockers++;\\n\\t\\t}\\n\\t}\\n\\tif (numBlockers == 0) return -1.0;\\n\\treturn blockerDepthSum / float(numBlockers);\\n}\\n\\nfloat PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {\\n\\tfloat sum = 0.0;\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[ i ] * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[ i ].yx * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\treturn sum / (2.0 * float(PCF_NUM_SAMPLES));\\n}\\n\\nfloat PCSS(sampler2D shadowMap, vec4 coords) {\\n\\tvec2 uv = coords.xy;\\n\\tfloat zReceiver = coords.z; // Assumed to be eye-space z in this code\\n\\tinitPoissonSamples(uv);\\n\\tfloat avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);\\n\\tif (avgBlockerDepth == -1.0) return 1.0;\\n\\tfloat penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\\n\\tfloat filterRadius = penumbraRatio * LIGHT_SIZE_UV * NEAR_PLANE / zReceiver;\\n\\treturn PCF_Filter(shadowMap, uv, zReceiver, filterRadius);\\n}\";\n\nlet deployed = false;\nconst softShadows = props => {\n  // Avoid adding the effect twice, which may happen in HMR scenarios\n  if (!deployed) {\n    deployed = true;\n    let shader = ShaderChunk.shadowmap_pars_fragment;\n    shader = shader.replace('#ifdef USE_SHADOWMAP', '#ifdef USE_SHADOWMAP\\n' + pcss(_extends({}, props)));\n    shader = shader.replace('#if defined( SHADOWMAP_TYPE_PCF )', '\\nreturn PCSS(shadowMap, shadowCoord);\\n#if defined( SHADOWMAP_TYPE_PCF )');\n    ShaderChunk.shadowmap_pars_fragment = shader;\n  }\n};\n\nfunction shaderMaterial(uniforms, vertexShader, fragmentShader, onInit) {\n  return class extends ShaderMaterial {\n    constructor() {\n      const entries = Object.entries(uniforms); // Create unforms and shaders\n\n      super({\n        uniforms: entries.reduce((acc, [name, value]) => _extends({}, acc, {\n          [name]: {\n            value\n          }\n        }), {}),\n        vertexShader,\n        fragmentShader\n      }); // Create getter/setters\n\n      entries.forEach(([name]) => Object.defineProperty(this, name, {\n        get: () => this.uniforms[name].value,\n        set: v => this.uniforms[name].value = v\n      }));\n      if (onInit) onInit(this);\n    }\n\n  };\n}\n\nclass StarfieldMaterial extends ShaderMaterial {\n  constructor() {\n    super({\n      uniforms: {\n        time: {\n          value: 0.0\n        },\n        fade: {\n          value: 1.0\n        }\n      },\n      vertexShader: \"uniform float time;\\n      attribute float size;\\n      varying vec3 vColor;\\n      void main() {\\n        vColor = color;\\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));\\n        gl_Position = projectionMatrix * mvPosition;\\n      }\",\n      fragmentShader: \"uniform sampler2D pointTexture;\\n      uniform float fade;\\n      varying vec3 vColor;\\n      void main() {\\n        float opacity = 1.0;\\n        if (fade == 1.0) {\\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\\n        }\\n        gl_FragColor = vec4(vColor, opacity);\\n      }\"\n    });\n  }\n\n}\n\nextend({\n  StarfieldMaterial\n});\n\nconst genStar = r => {\n  return new Vector3().setFromSpherical(new Spherical(r, Math.acos(1 - Math.random() * 2), Math.random() * 2 * Math.PI));\n};\n\nconst Stars = /*#__PURE__*/forwardRef(({\n  radius = 100,\n  depth = 50,\n  count = 5000,\n  saturation = 0,\n  factor = 4,\n  fade = false\n}, ref) => {\n  const material = useRef();\n  const [position, color, size] = useMemo(() => {\n    const positions = [];\n    const colors = [];\n    const sizes = Array.from({\n      length: count\n    }, () => (0.5 + 0.5 * Math.random()) * factor);\n    const color = new Color();\n    let r = radius + depth;\n    const increment = depth / count;\n\n    for (let i = 0; i < count; i++) {\n      r -= increment * Math.random();\n      positions.push(...genStar(r).toArray());\n      color.setHSL(i / count, saturation, 0.9);\n      colors.push(color.r, color.g, color.b);\n    }\n\n    return [new Float32Array(positions), new Float32Array(colors), new Float32Array(sizes)];\n  }, [count, depth, factor, radius, saturation]);\n  useFrame(state => material.current && (material.current.uniforms.time.value = state.clock.getElapsedTime()));\n  return /*#__PURE__*/React.createElement(\"points\", {\n    ref: ref\n  }, /*#__PURE__*/React.createElement(\"bufferGeometry\", {\n    attach: \"geometry\"\n  }, /*#__PURE__*/React.createElement(\"bufferAttribute\", {\n    attachObject: ['attributes', 'position'],\n    args: [position, 3]\n  }), /*#__PURE__*/React.createElement(\"bufferAttribute\", {\n    attachObject: ['attributes', 'color'],\n    args: [color, 3]\n  }), /*#__PURE__*/React.createElement(\"bufferAttribute\", {\n    attachObject: ['attributes', 'size'],\n    args: [size, 1]\n  })), /*#__PURE__*/React.createElement(\"starfieldMaterial\", {\n    ref: material,\n    attach: \"material\",\n    blending: AdditiveBlending,\n    \"uniforms-fade-value\": fade,\n    transparent: true,\n    vertexColors: true\n  }));\n});\n\nextend({\n  SkyImpl: Sky$1\n});\nconst Sky = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    distance = 450000,\n    sunPosition = [0, 1, 0]\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"distance\", \"sunPosition\"]);\n\n  const scale = useMemo(() => new Vector3().setScalar(distance), [distance]);\n  return /*#__PURE__*/React.createElement(\"skyImpl\", _extends({\n    ref: ref,\n    \"material-uniforms-sunPosition-value\": sunPosition,\n    scale: scale\n  }, props));\n});\n\nextend({\n  ReflectorImpl: Reflector$1\n});\nconst Reflector = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    children,\n    color,\n    textureWidth,\n    textureHeight,\n    clipBias,\n    shader,\n    encoding\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"color\", \"textureWidth\", \"textureHeight\", \"clipBias\", \"shader\", \"encoding\"]);\n\n  return /*#__PURE__*/React.createElement(\"reflectorImpl\", _extends({\n    ref: ref,\n    args: [undefined, {\n      color,\n      textureWidth,\n      textureHeight,\n      clipBias,\n      shader,\n      encoding\n    }]\n  }, props), React.Children.only(children));\n});\n\nlet _inverseMatrix = new Matrix4();\n\nlet _ray = new Ray();\n\nlet _sphere = new Sphere$1();\n\nlet _vA = new Vector3();\n\nfunction meshBounds(raycaster, intersects) {\n  let geometry = this.geometry;\n  let material = this.material;\n  let matrixWorld = this.matrixWorld;\n  if (material === undefined) return; // Checking boundingSphere distance to ray\n\n  if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n  _sphere.copy(geometry.boundingSphere);\n\n  _sphere.applyMatrix4(matrixWorld);\n\n  if (raycaster.ray.intersectsSphere(_sphere) === false) return;\n\n  _inverseMatrix.getInverse(matrixWorld);\n\n  _ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix); // Check boundingBox before continuing\n\n\n  if (geometry.boundingBox !== null && _ray.intersectBox(geometry.boundingBox, _vA) === null) return;\n  intersects.push({\n    distance: _vA.distanceTo(raycaster.ray.origin),\n    point: _vA.clone(),\n    object: this\n  });\n}\n\nfunction useCamera(camera, props) {\n  const {\n    mouse\n  } = useThree();\n  const [raycast] = useState(() => {\n    let raycaster = new Raycaster();\n    if (props) applyProps(raycaster, props, {});\n    return function (_, intersects) {\n      raycaster.setFromCamera(mouse, camera instanceof Camera ? camera : camera.current);\n      const rc = this.constructor.prototype.raycast.bind(this);\n      if (rc) rc(raycaster, intersects);\n    };\n  });\n  return raycast;\n}\n\nfunction useHelper(object3D, proto, ...args) {\n  const helper = React.useRef();\n  const {\n    scene\n  } = useThree();\n  useEffect(() => {\n    if (proto && object3D.current) {\n      helper.current = new proto(object3D.current, ...args);\n\n      if (helper.current) {\n        scene.add(helper.current);\n      }\n    }\n\n    return () => {\n      if (helper.current) {\n        scene.remove(helper.current);\n      }\n    };\n  }, [scene, proto, object3D, args]);\n  useFrame(() => {\n    if (helper.current) {\n      helper.current.update();\n    }\n  });\n  return helper;\n}\n\nfunction useAspect(type, width, height, factor = 1) {\n  const {\n    viewport: v,\n    aspect\n  } = useThree();\n  const adaptedHeight = height * (aspect > width / height ? v.width / width : v.height / height);\n  const adaptedWidth = width * (aspect > width / height ? v.width / width : v.height / height);\n  return [adaptedWidth * factor, adaptedHeight * factor, 1];\n}\n\nconst eps = 0.00001;\n\nfunction createShape(width, height, radius0) {\n  const shape = new Shape();\n  const radius = radius0 - eps;\n  shape.absarc(eps, eps, eps, -Math.PI / 2, -Math.PI, true);\n  shape.absarc(eps, height - radius * 2, eps, Math.PI, Math.PI / 2, true);\n  shape.absarc(width - radius * 2, height - radius * 2, eps, Math.PI / 2, 0, true);\n  shape.absarc(width - radius * 2, eps, eps, 0, -Math.PI / 2, true);\n  return shape;\n}\n\nconst RoundedBox = /*#__PURE__*/forwardRef(function RoundedBox(_ref, ref) {\n  let {\n    args: [width = 1, height = 1, depth = 1] = [],\n    radius = 0.05,\n    smoothness = 4,\n    children\n  } = _ref,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"args\", \"radius\", \"smoothness\", \"children\"]);\n\n  const shape = useMemo(() => createShape(width, height, radius), [width, height, radius]);\n  const params = useMemo(() => ({\n    depth: depth - radius * 2,\n    bevelEnabled: true,\n    bevelSegments: smoothness * 2,\n    steps: 1,\n    bevelSize: radius - eps,\n    bevelThickness: radius,\n    curveSegments: smoothness\n  }), [depth, radius, smoothness]);\n  const geomRef = useUpdate(geometry => void geometry.center(), [shape, params]);\n  return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n    ref: ref\n  }, rest), /*#__PURE__*/React.createElement(\"extrudeBufferGeometry\", {\n    attach: \"geometry\",\n    ref: geomRef,\n    args: [shape, params]\n  }), children);\n});\n\nfunction useTextureLoader(url) {\n  return useLoader(TextureLoader, url);\n}\n\nfunction draco(url = '/draco-gltf/') {\n  return loader => {\n    const dracoLoader = new DRACOLoader();\n    dracoLoader.setDecoderPath(url);\n    loader.setDRACOLoader(dracoLoader);\n  };\n}\n\nfunction useGLTFLoader(path, useDraco) {\n  const gltf = useLoader(GLTFLoader, path, useDraco ? draco(typeof useDraco === 'string' ? useDraco : '/draco-gltf/') : undefined);\n  return gltf;\n}\n\nfunction useCubeTextureLoader(files, {\n  path\n}) {\n  // @ts-ignore\n  const [cubeTexture] = useLoader( // @ts-ignore\n  CubeTextureLoader, [files], loader => loader.setPath(path));\n  return cubeTexture;\n}\n\nconst useProgress = create$1(set => {\n  DefaultLoadingManager.onStart = (item, loaded, total) => set({\n    active: true,\n    item,\n    loaded,\n    total,\n    progress: loaded / total * 100\n  });\n\n  DefaultLoadingManager.onLoad = () => set({\n    active: false\n  });\n\n  DefaultLoadingManager.onError = item => set(state => ({\n    errors: [...state.errors, item]\n  }));\n\n  DefaultLoadingManager.onProgress = (item, loaded, total) => set({\n    item,\n    loaded,\n    total,\n    progress: loaded / total * 100\n  });\n\n  return {\n    errors: [],\n    active: false,\n    progress: 0,\n    item: '',\n    loaded: 0,\n    total: 0\n  };\n});\n\nexport { Billboard, Box, Circle, Cone, Cylinder, Detailed, DeviceOrientationControls, Dodecahedron, Extrude, FlyControls, HTML, Html, Icosahedron, Lathe, Line, MapControls, MeshDistortMaterial, MeshWobbleMaterial, Octahedron, OrbitControls, OrthographicCamera, Parametric, PerspectiveCamera, Plane, Polyhedron, PositionalAudio, Reflector, Ring, RoundedBox, Shadow, Sky, Sphere, Stars, Stats, Tetrahedron, Text, Torus, TorusKnot, TrackballControls, TransformControls, Tube, draco, meshBounds, shaderMaterial, softShadows, useAspect, useCamera, useCubeTextureLoader, useGLTFLoader, useHelper, useProgress, useTextureLoader };\n"]},"metadata":{},"sourceType":"module"}